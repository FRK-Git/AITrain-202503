<template>
    <article class="slds-card">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-custom-custom52" title="Description of icon when needed">
                        <svg class="slds-icon slds-icon_small" aria-hidden="true">
                            <use
                                xlink:href="/apexpages/slds/latest/assets/icons/custom-sprite/svg/symbols.svg#custom52">
                            </use>
                        </svg>
                        <span class="slds-assistive-text">Description of icon when needed</span>
                    </span>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <a href="#" class="slds-card__header-link slds-truncate" title="BookInfo">
                            <span>读者信息</span>
                        </a>
                    </h2>
                </div>
                <div class="slds-no-flex">
                    <div class="slds-icon-eq slds-is-animated" title="Description of the icon when needed">
                        <div class="slds-icon-eq__bar"></div>
                        <div class="slds-icon-eq__bar"></div>
                        <div class="slds-icon-eq__bar"></div>
                        <span class="slds-assistive-text">Text alternative when needed</span>
                    </div>
                </div>
            </header>
        </div>
        <div class="slds-card__body slds-card__body_inner">
            <lightning-card>
                <lightning-layout multiple-rows>
                    <lightning-layout-item size="1" padding="around-small">
                    </lightning-layout-item>
                    <lightning-layout-item size="4" padding="around-small">
                        <div style="display: flex;">
                            <label class="slds-form-element__label custom_label"><abbr class="slds-required"
                                    title="required">* </abbr>读者编号</label>
                            <input type="text" class="slds-input" value={readerInfo.Name} disabled />
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="2" padding="around-small">
                    </lightning-layout-item>
                    <lightning-layout-item size="4" padding="around-small">
                        <div style="display: flex;">
                            <label class="slds-form-element__label custom_label"><abbr class="slds-required"
                                    title="required">* </abbr>读者姓名</label>
                            <input type="text" required="" class="slds-input" value={readerInfo.ReaderName__c}
                                onchange={fieldChange} data-field="ReaderName__c" />
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="1" padding="around-small">
                    </lightning-layout-item>

                    <lightning-layout-item size="1" padding="around-small">
                    </lightning-layout-item>
                    <lightning-layout-item size="4" padding="around-small">
                        <div style="display: flex;">
                            <label class="slds-form-element__label custom_label"><abbr class="slds-required"
                                    title="required">* </abbr>联系电话</label>
                            <input type="text" required="" class="slds-input" value={readerInfo.Phone__c}
                                onchange={fieldChange} data-field="Phone__c" />
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="2" padding="around-small">
                    </lightning-layout-item>
                    <lightning-layout-item size="4" padding="around-small">
                        <div style="display: flex;">
                            <label class="slds-form-element__label custom_label"><abbr class="slds-required"
                                    title="required">* </abbr>邮箱</label>
                            <input type="text" required="" class="slds-input" value={readerInfo.Email__c}
                                onchange={fieldChange} data-field="Email__c" />
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="1" padding="around-small">
                    </lightning-layout-item>

                    <lightning-layout-item size="1" padding="around-small">
                    </lightning-layout-item>
                    <lightning-layout-item size="4" padding="around-small">
                        <div style="display: flex;">
                            <label class="slds-form-element__label custom_label"><abbr class="slds-required"
                                    title="required">* </abbr>读者类型</label>
                            <div class="custom_combobox">
                                <lightning-combobox value={readerInfo.ReaderType__c} options={readerType}
                                    onchange={readerTypeChange}></lightning-combobox>
                            </div>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="2" padding="around-small">
                    </lightning-layout-item>
                    <lightning-layout-item size="4" padding="around-small">
                        <div style="display: flex;">
                            <label class="slds-form-element__label custom_label"><abbr class="slds-required"
                                    title="required">* </abbr>可借阅数量</label>
                            <input type="number" required="" class="slds-input" value={readerInfo.BorrowingQuantity__c}
                                onchange={fieldChange} data-field="BorrowingQuantity__c" />
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="1" padding="around-small">
                    </lightning-layout-item>
                </lightning-layout>
            </lightning-card>
            <div class="bookBorrowHead">
                图书借阅信息
            </div>
            <div class="scrollDiv">
                <table class="slds-table slds-table_cell-buffer slds-table_bordered itemTabel">
                    <thead>
                        <tr class="slds-line-height_reset">
                            <th class="" scope="col">
                                <div class="slds-truncate">借阅信息编号</div>
                            </th>
                            <th class="" scope="col">
                                <div class="slds-truncate">图书详细编号</div>
                            </th>
                            <th class="" scope="col">
                                <div class="slds-truncate">借阅日期</div>
                            </th>
                            <th class="" scope="col">
                                <div class="slds-truncate">应还日期</div>
                            </th>
                            <th class="" scope="col">
                                <div class="slds-truncate">续借状态</div>
                            </th>
                            <th scope="col" style="width: 50px;">
                                <a onclick={AddNewRow}>
                                    <lightning-icon icon-name="utility:add" size="small" alternative-text="Add" title="Add"></lightning-icon>
                                    <span class="slds-assistive-text">Add Icon</span>
                                </a>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <template for:each={bookBorrowList} for:item="item" for:index="Index">
                            <tr class="slds-hint-parent" key={item.Id} style="height: 60px;">
                                <td>
                                    <label>{item.Name}</label>
                                </td>
                                <td>
                                    <lightning-record-edit-form object-api-name="BookBorrowingInfo__c">
                                        <lightning-input-field field-name="BookDetailNo__c" value={item.BookDetailNo} variant="label-hidden"
                                        data-index={Index} data-field="BookDetailNo" onchange={itemFieldChange}>
                                        </lightning-input-field>
                                    </lightning-record-edit-form>
                                </td>
                                <td>
                                    <div class="custom_input_class1">
                                        <lightning-input type="date" value={item.BorrowDate} 
                                        data-index={Index} data-field="BorrowDate" onchange={itemFieldChange}></lightning-input>
                                    </div>
                                </td>
                                <td>
                                    <div class="custom_input_class1">
                                        <lightning-input type="date" value={item.DueReturnDate} 
                                        data-index={Index} data-field="DueReturnDate" onchange={itemFieldChange}></lightning-input>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <lightning-input type="checkbox" value={item.RenewStatus}
                                        data-index={Index} data-field="RenewStatus" onchange={itemFieldChange}></lightning-input>
                                    </div>
                                </td>
                                <td>
                                    <a onclick={removeRow} data-index={Index}>
                                        <lightning-icon icon-name="utility:delete" size="small" variant="error"></lightning-icon>
                                        <span class="slds-assistive-text">Remove Icon</span>
                                    </a>
                                </td>    
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>
        <footer class="slds-card__footer">
            <div style="display: flex;margin-left: 45%;">
                <div>
                    <lightning-button variant="brand" label="保存" title="保存" onclick={saveClick}></lightning-button>
                </div>
                <div style="margin-left: 16px;">
                    <lightning-button variant="Neutral" label="取消" title="取消" onclick={cancelClick}>
                    </lightning-button>
                </div>
            </div>
        </footer>
    </article>
</template>